<html>
  <body>
    <!-- <div>{{ appState$ | async | json }}</div> -->
    <div class="container-x1">
      <div class="table-responsive">
        <div class="table-wrapper">
          <div class="table-title">
            <div class="row">
              <div class="col-sm-6">
                <h2>Gerenciar Tasks</h2>
              </div>

              <div class="col-sm-6">
                <button type="button" class="btn btn-primary">Imprimir Relatório</button>

                <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal">
                  <i class="material-icons">&#xE147;</i>
                  <span>Nova Task</span>
                </a>

                <span>
                  <select name="status" ngModel="ALL" class="btn btn-info" style="height: 30px;">
                    <option value="ALL">Todas</option>
                    <option value="UNFINISHED">Não Concluídas</option>
                    <option value="FINISHED">Concluídas</option>
                  </select>
                </span>
              </div>
            </div>
          </div> <br/>

          <ng-container *ngIf="(appState$ | async) as appState" [ngSwitch]="appState.dataState">
            <ng-container *ngSwitchCase="DataState.LOADING_STATE">
              <div class="col-md-12 single-note-item text-center">
                <div class="spinner-border text-info" role="status"></div>
              </div>
            </ng-container>

            <ng-container *ngSwitchCase="DataState.LOADED_STATE">
              <table class="table table-striped table-hover" id="tasks">
                <thead>
                  <tr>
                    <th>Número</th>
                    <th>Título</th>
                    <th>Responsável</th>
                    <th>Deadline</th>
                    <th>Status</th>
                    <th>Prioridade</th>
                  </tr>
                </thead>

                <tbody *ngFor="let task of appState.appData.data.tasks; let i = index" >
                  <tr>
                    <td>{{ task.number }}</td>
                    <td>{{ task.title }}</td>
                    <td>{{ task.owner }}</td>
                    <td>{{ task.deadline }}</td>
                    <td>{{ task.status }}</td>
                    <td>{{ task.priority }}</td>
                  </tr>
                </tbody>
              </table>
            </ng-container>

            <ng-container *ngSwitchCase="DataState.ERROR_STATE">
              <div class="alert-danger">
                {{ appState.error }}
              </div>
            </ng-container>
          </ng-container>

        </div>
      </div>
    </div>

    <!-- Add task modal HTML 
    <div id="addEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form #taskForm="ngForm" (ngSubmit)="addTask(taskForm)">

            <div class="modal-header">
              <h4 class="modal-title">Adicionar Task</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>

            <div class="modal-body">
              <div class="form-group">
                <label>Número da tarefa</label>
                <input type="text" ngModel name="number" class="form-control" required>
              </div>

              <div class="form-group">
                <label>Título</label>
                <input type="text ngModel" name="name" class="form-control" required>
              </div>

              <div class="row">
                <div class="col-x1-6 col-lg-6 col-md-6 col-sm-6 col-6">
                  <div class="form-group">
                    <label>Responsável</label>
                    <input type="text" ngModel name="type" class="form-control" required>
                  </div>
                </div>

                <div class="col-x1-6 col-lg-6 col-md-6 col-sm-6 col-6">
                  <div class="form-group">
                    <label>Deadline</label>
                    <input type="text" ngModel name="deadline" required>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>Status</label>
                <select name="status" ngModel="UNFINISHED" class="form-control" name="status" required>
                  <option value="UNFINISHED">Não concluídas</option>
                  <option value="FINISHED">Concluídas</option>
                </select>
              </div>
            </div>

            <div class="modal-footer">
              <button type="submit" [disabled]="taskForm.invalid || (isLoading$ | async)" class="btn btn-success">
                <i *ngIf="isLoading$ | async" class="fas fa-spinner fa-spin"></i>
                <span *ngIf="isLoading$ | async">Adicionando task...</span>
                <span *ngIf="!(isLoading$ |async)">Adicionar task</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    -->

    <!-- <notifier-container></notifier-container> -->
  </body>
</html>